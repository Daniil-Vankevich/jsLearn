// let john = { name: "John"};

// let array = [john];

// john = null; // –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç.

// console.log( array[0] );
// –æ–±—ä–µ–∫—Ç john —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ, –ø–æ—ç—Ç–æ–º—É –æ–Ω –Ω–µ –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞
// –º—ã –º–æ–∂–µ–º –≤–∑—è—Ç—å –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫ array[0]


// –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ –≤ Map........................................

// let john = {name: "John"};

// let map = new Map();

// map.set(john, "Higgins");

// john = null; // –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç

// console.log(map.keys());




// WeakMap => —Å–ª–∞–±—ã–π –º—ç–ø.......

// –ü–µ—Ä–≤–æ–µ –µ–≥–æ –æ—Ç–ª–∏—á–∏–µ –æ—Ç Map –≤ —Ç–æ–º, —á—Ç–æ –∫–ª—é—á–∏ –≤ WeakMap –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–∞–º–∏, –∞ –Ω–µ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

// let weakMap = new WeakMap();

// let obj = {};

// weakMap.set(obj, "okey's");

// weakMap.set("test", "Whoops");

// –¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ä–µ–∫—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ –∏ –µ—Å–ª–∏ –±–æ–ª—å—à–µ –Ω–µ—Ç —Å—Å—ã–ª–æ–∫ –Ω–∞ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç, —Ç–æ –æ–Ω –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –∏–∑ –ø–∞–º—è—Ç–∏ (–∏ –∏–∑ –æ–±—ä–µ–∫—Ç–∞ WeakMap) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

// let john = { name: "John" };

// let weakMap = new WeakMap();
// weakMap.set(john, "...");

// john = null; // –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç

// –æ–±—ä–µ–∫—Ç john —É–¥–∞–ª—ë–Ω –∏–∑ –ø–∞–º—è—Ç–∏!

// –í WeakMap –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:

// weakMap.get(key)
// weakMap.set(key, value)
// weakMap.delete(key)
// weakMap.has(key)



// –ø—Ä–∏–º–µ—Ä: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.......

// // üìÅ visitsCount.js
// let visitsCountMap = new WeakMap(); // map: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å => —á–∏—Å–ª–æ –≤–∏–∑–∏—Ç–æ–≤

// // —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫
// function countUser(user) {
//   let count = visitsCountMap.get(user) || 0;
//   visitsCountMap.set(user, count + 1);
// }

// let john = {name: "John"};

// console.log(countUser(john.name));



// –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö......

// // üìÅ cache.js
// let cache = new Map();

// // –≤—ã—á–∏—Å–ª—è–µ–º –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
// function process(obj) {
//   if (!cache.has(obj)) {
//     let result = /* —Ç—É—Ç –∫–∞–∫–∏–µ-—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ */ obj;

//     cache.set(obj, result);
//   }

//   return cache.get(obj);
// }

// // –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ–º process() –≤ –¥—Ä—É–≥–æ–º —Ñ–∞–π–ª–µ:

// // üìÅ main.js
// let obj = {/* –¥–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç */};

// let result1 = process(obj); // –≤—ã—á–∏—Å–ª–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç

// // ...–ø–æ–∑–∂–µ, –∏–∑ –¥—Ä—É–≥–æ–≥–æ –º–µ—Å—Ç–∞ –≤ –∫–æ–¥–µ...
// let result2 = process(obj); // —Ä–∞–Ω–µ–µ –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∑—è—Ç –∏–∑ –∫–µ—à–∞

// // ...–ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω:
// obj = null;

// alert(cache.size); // 1 (–£–ø—Å! –û–±—ä–µ–∫—Ç –≤—Å—ë –µ—â—ë –≤ –∫–µ—à–µ, –∑–∞–Ω–∏–º–∞–µ—Ç –ø–∞–º—è—Ç—å!)

// // üìÅ cache.js
// let cache = new WeakMap();

// // –≤—ã—á–∏—Å–ª—è–µ–º –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
// function process(obj) {
//   if (!cache.has(obj)) {
//     let result = /* –≤—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ */ obj;

//     cache.set(obj, result);
//   }

//   return cache.get(obj);
// }

// // üìÅ main.js
// let obj = {/* –∫–∞–∫–æ–π-—Ç–æ –æ–±—ä–µ–∫—Ç */};

// let result1 = process(obj);
// let result2 = process(obj);

// // ...–ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω:
// obj = null;

// –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—É—á–∏—Ç—å cache.size, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ WeakMap,
// –Ω–æ –æ–Ω —Ä–∞–≤–µ–Ω 0 –∏–ª–∏ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω 0
// –ö–æ–≥–¥–∞ —Å–±–æ—Ä—â–∏–∫ –º—É—Å–æ—Ä–∞ —É–¥–∞–ª—è–µ—Ç obj, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–µ—à–∞ —Ç–æ–∂–µ —É–¥–∞–ª—è—é—Ç—Å—è




// WeakSet

// let visitedSet = new WeakSet();

// let john = { name: "John" };
// let pete = { name: "Pete" };
// let mary = { name: "Mary" };

// visitedSet.add(john); // John –∑–∞—Ö–æ–¥–∏–ª –∫ –Ω–∞–º
// visitedSet.add(pete); // –ø–æ—Ç–æ–º Pete
// visitedSet.add(john); // John —Å–Ω–æ–≤–∞

// // visitedSet —Å–µ–π—á–∞—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

// // –ø—Ä–æ–≤–µ—Ä–∏–º, –∑–∞—Ö–æ–¥–∏–ª –ª–∏ John?
// alert(visitedSet.has(john)); // true

// // –ø—Ä–æ–≤–µ—Ä–∏–º, –∑–∞—Ö–æ–¥–∏–ª–∞ –ª–∏ Mary?
// alert(visitedSet.has(mary)); // false

// john = null;

// —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö visitedSet –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–æ–±—ä–µ–∫—Ç john –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –∏–∑ visitedSet

// –û–Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ Set, –Ω–æ –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –≤ WeakSet —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã (–Ω–µ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è).
// –û–±—ä–µ–∫—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ —Ç–æ–ª—å–∫–æ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –≥–¥–µ-—Ç–æ –µ—â—ë.
// –ö–∞–∫ –∏ Set, –æ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç add, has –∏ delete, –Ω–æ –Ω–µ size, keys() –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º–æ–π.

// –ë—É–¥—É—á–∏ ¬´—Å–ª–∞–±–æ–π¬ª –≤–µ—Ä—Å–∏–µ–π –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –æ–Ω–∞ —Ç–æ–∂–µ —Å–ª—É–∂–∏—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –ù–æ –Ω–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞ —Å–∫–æ—Ä–µ–µ –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π —Ç–∏–ø–∞ ¬´–¥–∞/–Ω–µ—Ç¬ª. –ü—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ WeakSet –º–æ–∂–µ—Ç —á—Ç–æ-—Ç–æ —Å–∫–∞–∑–∞—Ç—å –Ω–∞–º –æ–± –æ–±—ä–µ–∫—Ç–µ.

// –ù–∞–∏–±–æ–ª–µ–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º WeakMap –∏ WeakSet —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –∏—Ö –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–±—Ä–∞—Ç—å –∏–ª–∏ –≤–∑—è—Ç—å –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ. –≠—Ç–æ –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞, –Ω–æ –Ω–µ –º–µ—à–∞–µ—Ç WeakMap/WeakSet –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö –≥–ª–∞–≤–Ω—É—é –∑–∞–¥–∞—á—É ‚Äì –±—ã—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤, —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –∏–∑ –∫–∞–∫–∏—Ö-—Ç–æ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç –≤ –∫–æ–¥–µ.





// –ó–∞–¥–∞—á–∏ –ø–æ —Ç–µ–º–µ:


// let messages = [
// 	{text: "Hello", from: "John"},
// 	{text: "How goes?", from: "John"},
// 	{text: "See you soon", from: "Alice"}
// ];

// let readMessages = new WeakSet();

// // –î–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –±—ã–ª–∏ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã
// readMessages.add(messages[0]);
// readMessages.add(messages[1]);
// // readMessages —Å–æ–¥–µ—Ä–∂–∏—Ç 2 —ç–ª–µ–º–µ–Ω—Ç–∞

// // ...–¥–∞–≤–∞–π—Ç–µ —Å–Ω–æ–≤–∞ –ø—Ä–æ—á–∏—Ç–∞–µ–º –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!
// readMessages.add(messages[0]);
// // readMessages –¥–æ —Å–∏—Ö –ø–æ—Ä —Å–æ–¥–µ—Ä–∂–∏—Ç 2 —ç–ª–µ–º–µ–Ω—Ç–∞

// // –í–æ–ø—Ä–æ—Å: –±—ã–ª–æ –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ message[0] –ø—Ä–æ—á–∏—Ç–∞–Ω–æ?
// alert("Read message 0: " + readMessages.has(messages[0])); // true

// messages.shift();
// // —Ç–µ–ø–µ—Ä—å readMessages —Å–æ–¥–µ—Ä–∂–∏—Ç 1 —ç–ª–µ–º–µ–Ω—Ç (—Ö–æ—Ç—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –ø–∞–º—è—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–∏—â–µ–Ω–∞ –ø–æ–∑–∂–µ)


// –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤–∏–¥–∞ message.isRead=true –∫ —Å–æ–æ–±—â–µ–Ω–∏—é –ø–æ—Å–ª–µ –µ–≥–æ –ø—Ä–æ—á—Ç–µ–Ω–∏—è. –¢–∞–∫ –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —á—É–∂–æ–º—É –∫–æ–¥—É, —Ç–æ —ç—Ç–æ –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ, –Ω–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ-—Å–∏–º–≤–æ–ª, —Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –±—É–¥–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–π.

// // —Å–∏–º–≤–æ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞—à–µ–º—É –∫–æ–¥—É
// let isRead = Symbol("isRead");
// messages[0][isRead] = true;


// –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞—Ç—ã –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WeakMap:

// let messages = [
//   {text: "Hello", from: "John"},
//   {text: "How goes?", from: "John"},
//   {text: "See you soon", from: "Alice"}
// ];

// let readMap = new WeakMap();

// readMap.set(messages[0], new Date(2017, 1, 1));
// –û–±—ä–µ–∫—Ç Date –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–∑–¥–Ω–µ–µ